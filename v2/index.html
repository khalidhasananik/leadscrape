<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Professional Information Collector</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
    *{box-sizing:border-box;margin:0;padding:0;font-family:Arial,Helvetica,sans-serif}
    body{
        min-height:100vh;
        display:flex;
        justify-content:center;
        align-items:center;
        background:linear-gradient(135deg,#f5f7fa 0%,#c3cfe2 100%);
        padding:20px;
    }
    .container{
        width:100%;
        max-width:600px;
        background:#fff;
        border-radius:12px;
        box-shadow:0 10px 30px rgba(0,0,0,.1);
        padding:30px;
    }
    h1{font-size:1.8rem;color:#2c3e50;text-align:center;margin-bottom:15px}
    .description{
        text-align:center;color:#7f8c8d;margin-bottom:25px;line-height:1.5
    }
    .form-group{margin-bottom:18px}
    label{display:block;margin-bottom:6px;color:#34495e;font-weight:500}
    input{
        width:100%;padding:12px 15px;border:1px solid #ddd;
        border-radius:8px;font-size:16px;transition:border-color .3s
    }
    input:focus{
        outline:none;border-color:#3498db;
        box-shadow:0 0 0 3px rgba(52,152,219,.2)
    }
    button{
        width:100%;padding:14px;font-size:16px;font-weight:600;
        background:#3498db;color:#fff;border:none;border-radius:8px;
        cursor:pointer;transition:background .3s
    }
    button:hover{background:#2980b9}
    .loading{
        text-align:center;margin:30px 0;display:none
    }
    .spinner{
        width:50px;height:50px;border:5px solid rgba(52,152,219,.2);
        border-top-color:#3498db;border-radius:50%;animation:spin 1s linear infinite;
        margin:0 auto 20px
    }
    @keyframes spin{to{transform:rotate(360deg)}}
    .result{
        display:none;margin-top:30px;animation:fadeIn .5s ease-in
    }
    @keyframes fadeIn{from{opacity:0}to{opacity:1}}
    .result h3{color:#2c3e50;margin-bottom:12px}
    textarea{
        width:100%;height:200px;padding:15px;border:1px solid #ddd;
        border-radius:8px;font-size:14px;resize:vertical;background:#f9f9f9
    }
    .actions{
        margin-top:15px;display:flex;gap:10px;justify-content:flex-end
    }
    .actions button{
        width:auto;padding:8px 14px;font-size:14px;
    }
    .optional{color:#7f8c8d;font-style:italic}
</style>
</head>
<body>
<div class="container">
    <h1>Professional Information Collector</h1>
    <p class="description">
        Please provide your information below. The LinkedIn URL is optional.
        After submission, processing may take several minutes.
    </p>

    <!-- ---------- FORM ---------- -->
    <form id="infoForm">
        <div class="form-group">
            <label for="name">Full Name *</label>
            <input type="text" id="name" required placeholder="Enter your full name">
        </div>
        <div class="form-group">
            <label for="company">Company *</label>
            <input type="text" id="company" required placeholder="Enter your company name">
        </div>
        <div class="form-group">
            <label for="linkedin">LinkedIn URL <span class="optional">(optional)</span></label>
            <input type="url" id="linkedin" placeholder="https://linkedin.com/in/yourprofile">
        </div>
        <button type="submit">Submit Information</button>
    </form>

    <!-- ---------- LOADING ---------- -->
    <div class="loading" id="loading">
        <div class="spinner"></div>
        <p>Processing your request, this might take several minutes...</p>
    </div>

    <!-- ---------- RESULT ---------- -->
    <div class="result" id="result">
        <h3>Webhook Response:</h3>
        <textarea id="response" readonly></textarea>
        <div class="actions">
            <button id="copyBtn">Copy</button>
            <button id="clearBtn">New Entry</button>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const form      = document.getElementById('infoForm');
    const loading   = document.getElementById('loading');
    const result    = document.getElementById('result');
    const response  = document.getElementById('response');
    const copyBtn   = document.getElementById('copyBtn');
    const clearBtn  = document.getElementById('clearBtn');

    // ---- Submit ----
    form.addEventListener('submit', async e => {
        e.preventDefault();

        // Gather values
        const name     = document.getElementById('name').value.trim();
        const company  = document.getElementById('company').value.trim();
        const linkedin = document.getElementById('linkedin').value.trim() || null;

        // UI switch
        form.style.display   = 'none';
        loading.style.display = 'block';

        try {
            const webhookURL = 'https://seal-apt-blatantly.ngrok-free.app/webhook-test/e7faa353-5751-4eb3-a9b4-6cc0dfe95705'; // <-- replace

            const res = await fetch(webhookURL, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({name, company, linkedin})
            });

            if (!res.ok) throw new Error(`Webhook error: ${res.status}`);

            const data = await res.json();
            response.value = JSON.stringify(data, null, 2);
        } catch (err) {
            response.value = `Error: ${err.message}`;
        } finally {
            loading.style.display = 'none';
            result.style.display  = 'block';
        }
    });

    // ---- Copy to clipboard ----
    copyBtn.addEventListener('click', async () => {
        try {
            await navigator.clipboard.writeText(response.value);
            copyBtn.textContent = 'Copied!';
            setTimeout(() => copyBtn.textContent = 'Copy', 1500);
        } catch (e) {
            alert('Copy failed. Please select the text manually.');
        }
    });

    // ---- Clear / New entry ----
    clearBtn.addEventListener('click', () => {
        // Reset fields
        form.reset();

        // Hide result, show form again
        result.style.display = 'none';
        form.style.display   = 'block';
    });
});
</script>
</body>
</html>